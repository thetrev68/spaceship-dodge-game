(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const qe="modulepreload",He=function(e){return"/spaceship-dodge-game/"+e},_e={},v=function(t,n,s){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(n.map(u=>{if(u=He(u),u in _e)return;_e[u]=!0;const a=u.endsWith(".css"),h=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=a?"stylesheet":qe,a||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),a)return new Promise((g,A)=>{f.addEventListener("load",g),f.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return o.then(l=>{for(const c of l||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})},d={value:"START"},T={value:0},P={value:0},I={value:3},Be={value:0},y=[],p=[],se={value:0},B=[35,22,12],De=[20,50,100],Ne=.8,Ce=2.5,Xe=.5,N="ontouchstart"in window||navigator.maxTouchPoints>0,ke=N?2400:1500,Ve=70,U={value:!0},Ke=10,Ge=3,Ze=100,m={doubleBlaster:{active:!1,timer:0},shield:{active:!1,timer:0}},i={x:380,y:500,width:30,height:45,speed:7,dx:0,dy:0},Je=Object.freeze(Object.defineProperty({__proto__:null,ASTEROID_LEVEL_SIZES:B,ASTEROID_SCORE_VALUES:De,BASE_OBSTACLE_MAX_SPEED:Ce,BASE_OBSTACLE_MIN_SPEED:Ne,BASE_SPAWN_INTERVAL:ke,SPAWN_INTERVAL_DECREASE_PER_LEVEL:Ve,SPEED_INCREASE_PER_LEVEL:Xe,allowSpawning:U,bulletRadius:Ge,bulletSpeed:Ke,bullets:y,fireRate:Ze,gameLevel:P,gameState:d,isMobile:N,lastObstacleSpawnTime:Be,levelStartTime:se,obstacles:p,player:i,playerLives:I,powerUps:m,score:T},Symbol.toStringTag,{value:"Module"})),W=document.getElementById("startOverlay"),Q=document.getElementById("gameOverOverlay"),Qe=document.getElementById("finalScore"),ee=document.getElementById("levelTransitionOverlay"),te=document.getElementById("pauseOverlay"),et=document.getElementById("levelUpMessage"),tt=document.getElementById("currentLevelInfo"),nt=document.getElementById("currentScoreInfo"),Ae=document.getElementById("livesInfoStart"),Se=document.getElementById("livesInfoLevel"),Ie=document.getElementById("livesInfoPause");function _(e,t=0,n=0){switch([W,te,Q,ee].forEach(o=>{o.classList.add("hidden"),o.classList.remove("flex")}),Ae&&(Ae.textContent=`Lives: ${I.value}`),Se&&(Se.textContent=`Lives: ${I.value}`),Ie&&(Ie.textContent=`Lives: ${I.value}`),e){case"START":W.classList.remove("hidden"),W.classList.add("flex");break;case"GAME_OVER":v(()=>Promise.resolve().then(()=>L),void 0).then(o=>o.stopMusic()),Qe.textContent=`Final Score: ${t} (Level ${n+1})`,Q.classList.remove("hidden"),Q.classList.add("flex");break;case"LEVEL_TRANSITION":v(()=>Promise.resolve().then(()=>L),void 0).then(o=>o.stopMusic()),et.textContent=`LEVEL ${n+1} !`,tt.textContent="Get Ready!",nt.textContent=`Score: ${t}`,ee.classList.remove("hidden"),ee.classList.add("flex");break;case"PAUSED":v(()=>Promise.resolve().then(()=>L),void 0).then(o=>o.stopMusic()),te.classList.remove("hidden"),te.classList.add("flex");break;case"PLAYING":W.style.display="none",v(()=>Promise.resolve().then(()=>L),void 0).then(o=>o.startMusic());break}document.dispatchEvent(new Event("gameStateChange"))}function me(e){const t=window.innerWidth,n=window.innerHeight;t<600?(e.height=n*.95,e.width=t):(e.width=t*.9,e.height=n*.9)}function ve(){confirm("Are you sure you want to quit the game?")&&Promise.all([v(()=>Promise.resolve().then(()=>L),void 0),v(()=>Promise.resolve().then(()=>Je),void 0),v(()=>Promise.resolve().then(()=>Ye),void 0)]).then(([t,n,s])=>{t.stopMusic(),n.gameState.value="GAME_OVER",n.bullets.length=0,n.obstacles.length=0,Object.keys(n.powerUps).forEach(o=>{n.powerUps[o].active=!1,n.powerUps[o].timer=0}),t.playSound("gameover"),s.showOverlay("GAME_OVER",n.score.value,n.gameLevel.value)})}function pe(e){const t=e.getBoundingClientRect();[W,Q,ee,te].forEach(n=>{n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.left=t.left+"px",n.style.top=t.top+"px"})}const Ye=Object.freeze(Object.defineProperty({__proto__:null,initializeCanvas:me,quitGame:ve,setOverlayDimensions:pe,showOverlay:_},Symbol.toStringTag,{value:"Module"}));function ot(e){const t=e.getContext("2d"),n=[],s=100;function o(){e.width=window.innerWidth,e.height=window.innerHeight}o(),window.addEventListener("resize",o);for(let l=0;l<s;l++)n.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:Math.random()*1.5+.5,speed:Math.random()*.5+.1});function r(){t.clearRect(0,0,e.width,e.height),t.fillStyle="white";for(const l of n)l.y+=l.speed,l.y>e.height&&(l.y=0,l.x=Math.random()*e.width),t.beginPath(),t.arc(l.x,l.y,l.radius,0,2*Math.PI),t.fill();requestAnimationFrame(r)}r()}const E={bgm:new Audio("assets/sounds/bg-music.mp3"),fire:new Audio("assets/sounds/fire.wav"),break:new Audio("assets/sounds/break.wav"),gameover:new Audio("assets/sounds/gameover.wav"),levelup:new Audio("assets/sounds/levelup.wav")};let D=.4,w=!1,re=!1;E.bgm.loop=!0;we();function we(){Object.values(E).forEach(e=>{e.volume=w?0:D,e.muted=w})}function Ue(e){D=e,w||Object.values(E).forEach(t=>{t.volume=D})}function X(){w=!0,we()}function $(){w=!1,we()}function K(e){if(w||!E[e])return;re||Le();const t=E[e].cloneNode();t.volume=w?0:D,t.muted=w,t.play().catch(n=>console.error(`Error playing sound ${e}:`,n))}function $e(){w||(re||Le(),setTimeout(()=>{E.bgm.volume=w?0:D,E.bgm.muted=w,E.bgm.play().catch(e=>console.error("Error playing bgm:",e))},100))}function ae(){E.bgm.pause(),E.bgm.currentTime=0}function Le(){re||Promise.all(Object.values(E).map(e=>e.play().then(()=>{e.pause(),e.currentTime=0}).catch(()=>{}))).then(()=>{re=!0,console.log("Audio context unlocked")})}const L=Object.freeze(Object.defineProperty({__proto__:null,get currentVolume(){return D},muteAll:X,playSound:K,setVolume:Ue,startMusic:$e,stopMusic:ae,unlockAudio:Le,unmuteAll:$},Symbol.toStringTag,{value:"Module"}));function de(e,t){d.value==="PLAYING"&&(y.push({x:e,y:t,radius:Ge,dy:-10}),K("fire"))}function it(e){for(let t=y.length-1;t>=0;t--){const n=y[t];n.y+=n.dy,n.y+n.radius<0&&y.splice(t,1)}}function st(e){e.fillStyle="#ffff88",y.forEach(t=>{e.beginPath(),e.arc(t.x,t.y,t.radius,0,Math.PI*2),e.fill()})}function rt(){if(d.value!=="PLAYING")return;i.x+=i.dx,i.y+=i.dy;const e=document.getElementById("gameCanvas");i.x=Math.max(0,Math.min(i.x,e.width-i.width)),i.y=Math.max(0,Math.min(i.y,e.height-i.height))}function lt(e){if(d.value!=="PLAYING")return;if(m.shield.active){e.save(),e.shadowColor="#0ff",e.shadowBlur=20,e.strokeStyle="#00ffff",e.lineWidth=4;const We=i.x+i.width/2,je=i.y+i.height/2,ze=Math.max(i.width,i.height)*.7;e.beginPath(),e.arc(We,je,ze,0,Math.PI*2),e.stroke(),e.restore()}e.strokeStyle="#00ffff",e.lineWidth=2;const t=i.width,n=i.height,s=i.x,o=i.y,r=s+t/2,l=.3;e.beginPath(),e.moveTo(r,o),e.lineTo(s+t*.2,o+n*.8),e.lineTo(r-t*l,o+n*.75),e.lineTo(r+t*l,o+n*.75),e.lineTo(s+t*.8,o+n*.8),e.closePath(),e.stroke();const c=t*.2,u=t*.07,a=n*.3,h=o+n*.75,f=h+a,g=r-c/2,A=r+c/2,F=r-u/2,C=r+u/2;e.beginPath(),e.moveTo(g,h),e.lineTo(A,h),e.lineTo(C,f),e.lineTo(F,f),e.closePath(),e.stroke(),e.beginPath(),e.moveTo(r,h+a*.2),e.lineTo(r,h+a*.8),e.moveTo(r-u*.8,h+a*.3),e.lineTo(r-u*.8,h+a*.7),e.moveTo(r+u*.8,h+a*.3),e.lineTo(r+u*.8,h+a*.7),e.stroke();const x=performance.now()/500,k=(Math.sin(x)+1)/2,V=r,ue=f+5,O=u,ce=e.createRadialGradient(V,ue,0,V,ue,O*3);ce.addColorStop(0,`rgba(0, 255, 255, ${.6*k})`),ce.addColorStop(1,"rgba(0, 255, 255, 0)"),e.fillStyle=ce,e.beginPath(),e.ellipse(V,ue+O,O*1.5,O*3,0,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(0, 255, 255, ${.7*k})`,e.beginPath(),e.moveTo(V-O*.6,f),e.lineTo(V+O*.6,f),e.lineTo(V,f+O*3),e.closePath(),e.fill()}function Te(){m.doubleBlaster.active?(de(i.x+i.width*.25,i.y),de(i.x+i.width*.75,i.y)):de(i.x+i.width/2,i.y)}const b=[];function ge(e,t,n,s="#ffffff"){N||b.push({text:e,x:t,y:n,opacity:1,color:s})}function at(){if(!N)for(let e=b.length-1;e>=0;e--)b[e].y-=.5,b[e].opacity-=.02,b[e].opacity<=0&&b.splice(e,1)}function ut(e){N||b.forEach(t=>{e.globalAlpha=t.opacity,e.fillStyle=t.color,e.font="16px Inter",e.fillText(t.text,t.x,t.y),e.globalAlpha=1})}let Oe=Ne,ct=1;const R={};let dt=Ce,Pe=0;function ft(){Pe=0}function ht(e,t){const n=[],s=Math.PI*2/t;for(let o=0;o<t;o++){const r=o*s,l=e*(.8+Math.random()*.4);n.push({x:l*Math.cos(r),y:l*Math.sin(r)})}return n}function Fe(e,t,n,s=0,o=0,r=null){const l=B[n],c=De[n],u=Math.floor(Math.random()*6)+5,a=N?Math.min(u,5):u,h=ht(l,a),f=ct++;r===null&&(R[f]=0);const g=r??f;typeof R[g]>"u"&&(R[g]=0),n===B.length-1&&R[g]++;const A=Math.random()*(dt-Oe)+Oe,F=r===null?A:A*.3,C=Math.random()*2*Math.PI,x=Math.random()*.01-.05,k=Date.now();p.push({x:e,y:t,radius:l,speed:F,dx:s,dy:o,shape:h,level:n,scoreValue:c,id:f,parentId:g,rotation:C,rotationSpeed:x,creationTime:k}),n===0&&Pe++}function mt(e,t,n,s,o=!0){const r=Date.now(),l=100,c=3e4;for(let u=0;u<p.length;u++){const a=p[u];a.creationTime||(a.creationTime=r),a.y+=a.speed+a.dy,a.x+=a.dx,a.rotation=(a.rotation+a.rotationSpeed)%(2*Math.PI);const h=a.y>t+l||a.x+a.radius*2<-100||a.x>e+l,f=r-a.creationTime>c;(h||f)&&(p.splice(u,1),u--)}o&&r-s.value>n&&(Fe(Math.random()*(e-B[0]*2),-B[0]*2,0),s.value=r)}function vt(e){e.strokeStyle="#ff4500",e.lineWidth=2,p.forEach(t=>{e.save(),e.translate(t.x+t.radius,t.y+t.radius),e.rotate(t.rotation),e.beginPath(),e.moveTo(t.shape[0].x,t.shape[0].y);for(let n=1;n<t.shape.length;n++)e.lineTo(t.shape[n].x,t.shape[n].y);e.closePath(),e.stroke(),e.restore()})}function pt(e,t){const n=p.indexOf(e);if(n!==-1){if(p.splice(n,1),K("break"),e.level<B.length-1){const s=e.level+1,o=Math.floor(Math.random()*2)+2;for(let r=0;r<o;r++){const l=Math.random()*Math.PI*2,c=Math.random()<.8?Math.random()*.7+.3:Math.random()*1.5+1,u=Math.cos(l)*c,a=Math.sin(l)*c;Fe(e.x+e.radius,e.y+e.radius,s,u,a,e.parentId??e.id)}}t.value+=e.scoreValue,ge(`+${e.scoreValue}`,e.x+e.radius,e.y),e.parentId!==null&&e.level===B.length-1&&(R[e.parentId]--,R[e.parentId]===0&&(t.value+=150,ge("+150 (All Fragments)",e.x,e.y-10,"#00ff00"),delete R[e.parentId]))}}const le={DOUBLE_BLASTER:"doubleBlaster",SHIELD:"shield"},H=50,G=[];function gt(e){const t=Math.random()*(e-H),n=-50,s=Math.random()<.5?le.DOUBLE_BLASTER:le.SHIELD;G.push({x:t,y:n,size:H,type:s,dy:1.5})}function yt(e){for(let t=G.length-1;t>=0;t--){const n=G[t];if(n.y+=n.dy,n.y>e){G.splice(t,1);continue}i.x<n.x+n.size&&i.x+i.width>n.x&&i.y<n.y+n.size&&i.y+i.height>n.y&&(wt(n.type),G.splice(t,1),ge(`Power-up! ${n.type}`,i.x,i.y-20,"#00ffff"))}Object.keys(m).forEach(t=>{m[t].active&&(m[t].timer--,m[t].timer<=0&&(m[t].active=!1))})}function Et(e){G.forEach(t=>{const n=t.x+H/2,s=t.y+H/2,o=H/2,r=performance.now()/600,l=(Math.sin(r)+1)/2,c=.75+.5*l;if(e.save(),e.translate(n,s),e.scale(c,c),e.translate(-n,-s),t.type===le.DOUBLE_BLASTER){const a=o*.8,h=a/2.5;e.shadowColor="#f9d71c",e.shadowBlur=15*l,e.fillStyle="#f9d71c",e.beginPath();for(let f=0;f<5;f++){const g=Math.PI/2*3+f*Math.PI*2/5,A=n+Math.cos(g)*a,F=s+Math.sin(g)*a;e.lineTo(A,F);const C=g+Math.PI/5,x=n+Math.cos(C)*h,k=s+Math.sin(C)*h;e.lineTo(x,k)}e.closePath(),e.fill()}else if(t.type===le.SHIELD){const u=o*(.75+.25*l),a=e.createRadialGradient(n,s,u*.1,n,s,u);a.addColorStop(0,`rgba(0, 255, 255, ${.8*l})`),a.addColorStop(1,"rgba(0, 255, 255, 0)"),e.fillStyle=a,e.beginPath(),e.arc(n,s,u,0,Math.PI*2),e.fill(),e.fillStyle="#0ff",e.beginPath(),e.arc(n,s,u*.6,0,Math.PI*2),e.fill()}e.restore()})}function wt(e){m[e].active=!0,m[e].timer=600}function Lt(e,t,n,s,o,r,l){const c=Math.max(s,Math.min(e,s+r)),u=Math.max(o,Math.min(t,o+l)),a=e-c,h=t-u;return a*a+h*h<n*n}function Pt(){const e=i.x,t=i.y,n=i.width,s=i.height;for(const o of p){const r=o.x+o.radius,l=o.y+o.radius;if(Lt(r,l,o.radius,e,t,n,s))return o}return null}function _t(){for(let e=y.length-1;e>=0;e--){const t=y[e];for(let n=p.length-1;n>=0;n--){const s=p[n],o=t.x-(s.x+s.radius),r=t.y-(s.y+s.radius);if(Math.sqrt(o*o+r*r)<t.radius+s.radius){y.splice(e,1),pt(s,T);break}}}}function At(){Pt()&&(m.shield.active||v(()=>Promise.resolve().then(()=>$t),void 0).then(t=>t.handlePlayerHit())),_t()}let j=!1,z=null;const St=5e3,It=20;function Z(){U.value=!0,j=!1,z=null,se.value=Date.now(),console.log("[FlowManager] Level flow reset")}function Tt(e){const t=Date.now();if((t-se.value)/1e3,Pe>=(P.value+1)*It&&(U.value=!1),!U.value&&!j&&p.length===0&&(j=!0,z=t),j&&z){const n=t-z,s=t-se.value;(n>=1500||s>=St)&&(P.value++,d.value="LEVEL_TRANSITION",y.length=0,U.value=!0,j=!1,z=null,v(()=>Promise.resolve().then(()=>L),void 0).then(o=>o.playSound("levelup")),v(()=>Promise.resolve().then(()=>L),void 0).then(o=>o.stopMusic()),e())}}function Ot(e){e.fillStyle="#ffffff",e.font='24px "Inter", sans-serif',e.textAlign="left",e.fillText(`Score: ${T.value}`,20,40),e.fillText(`Level: ${P.value+1}`,20,70),e.fillText(`Lives: ${I.value}`,20,100)}function Mt(e){let s=120;e.font="18px monospace",e.fillStyle="#00ffff",Object.entries(m).forEach(([o,r])=>{if(r.active){const l=Math.ceil(r.timer/60);e.fillText(`${bt(o)}: ${l}s`,20,s),s+=24}})}function bt(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Rt(e){d.value==="PLAYING"&&(lt(e),vt(e),st(e),Et(e),Ot(e),ut(e),Mt(e))}const Bt=60,Dt=1e3/Bt;let Me=0,Y,ye,fe=0;const Nt=1e4,xe=300;function Ct(e){const t=ke-e*Ve;return Math.max(t,xe)}let be=xe;function kt(e){Y=e,Y.width=window.innerWidth,Y.height=window.innerHeight,ye=Y.getContext("2d")}function S(){Y&&requestAnimationFrame(e=>ne(Y,e))}function ne(e,t=0){if(t-Me<Dt){requestAnimationFrame(n=>ne(e,n));return}if(Me=t,d.value!=="PLAYING"){requestAnimationFrame(n=>ne(e,n));return}ye.clearRect(0,0,e.width,e.height),be=Ct(P.value),(!fe||t-fe>Nt)&&(gt(e.width),fe=t),rt(),mt(e.width,e.height,be,Be,U.value),it(e.height),yt(e.height),at(),At(),Rt(ye),Tt(()=>{ft(),Z(),v(()=>Promise.resolve().then(()=>Ye),void 0).then(n=>{n.showOverlay("LEVEL_TRANSITION",T.value,P.value)})}),requestAnimationFrame(n=>ne(e,n))}function Vt(){const e=document.createElement("div");e.style.position="absolute",e.style.top="20px",e.style.right="20px",e.style.zIndex="20",e.style.display="flex",e.style.gap="10px";const t=document.createElement("button");t.textContent="ðŸ”‡",t.addEventListener("touchstart",o=>{o.preventDefault(),X()},{passive:!1}),t.addEventListener("click",()=>X());const n=document.createElement("button");n.textContent="ðŸ”Š",n.addEventListener("touchstart",o=>{o.preventDefault(),$()},{passive:!1}),n.addEventListener("click",()=>$());const s=document.createElement("input");s.type="range",s.min="0",s.max="1",s.step="0.05",s.value=D.toString(),s.oninput=o=>{const r=parseFloat(o.target.value);Ue(r)},e.appendChild(t),e.appendChild(n),e.appendChild(s),document.body.appendChild(e)}function Gt(){I.value-=1,K("gameover"),I.value<=0?(d.value="GAME_OVER",ae(),_("GAME_OVER",T.value,P.value)):(d.value="LEVEL_TRANSITION",Yt(),_("LEVEL_TRANSITION",T.value,P.value))}function Yt(){i.x=window.innerWidth/2-i.width/2,i.y=window.innerHeight-i.height-50,i.dx=0,i.dy=0,y.length=0,p.length=0,Z(),ae()}function q(e){d.value="PLAYING",T.value=0,P.value=0,I.value=3,m.shield.active=!1,m.shield.timer=0,m.doubleBlaster.active=!1,m.doubleBlaster.timer=0,y.length=0,p.length=0,i.x=e.width/2-i.width/2,i.y=e.height-i.height-50,i.dx=0,i.dy=0,Z(),_("PLAYING"),Vt(),$(),v(()=>Promise.resolve().then(()=>L),void 0).then(n=>n.startMusic()),e.getContext("2d").clearRect(0,0,e.width,e.height)}function Ee(){d.value="PLAYING",Z(),_("PLAYING"),$e()}function Ut(){d.value="GAME_OVER",ae(),K("gameover"),_("GAME_OVER",T.value,P.value)}const $t=Object.freeze(Object.defineProperty({__proto__:null,continueGame:Ee,endGame:Ut,handlePlayerHit:Gt,resetLevelFlow:Z,showOverlay:_,startGame:q},Symbol.toStringTag,{value:"Module"}));let oe=!1,ie=null,M=!1,J=0;const Re=150;function Ft(e){document.addEventListener("keydown",t=>{if(t.key==="p"&&!M){if(M=!0,d.value!=="PLAYING"&&d.value!=="PAUSED"){M=!1;return}const n=d.value==="PLAYING"?"PAUSED":"PLAYING";d.value=n,_(n),n==="PAUSED"?(X(),he()):n==="PLAYING"&&($(),S()),setTimeout(()=>M=!1,300);return}if(d.value==="PLAYING")switch(t.key){case"ArrowUp":case"w":i.dy=-i.speed;break;case"ArrowDown":case"s":i.dy=i.speed;break;case"ArrowLeft":case"a":i.dx=-i.speed;break;case"ArrowRight":case"d":i.dx=i.speed;break;case" ":const n=Date.now();n-J>Re&&(Te(),J=n);break}}),document.addEventListener("keyup",t=>{if(d.value==="PLAYING")switch(t.key){case"ArrowUp":case"w":case"ArrowDown":case"s":i.dy=0;break;case"ArrowLeft":case"a":case"ArrowRight":case"d":i.dx=0;break}}),e.addEventListener("mousemove",t=>{if(d.value!=="PLAYING")return;const n=e.getBoundingClientRect(),s=t.clientX-n.left,o=t.clientY-n.top;i.x=s-i.width/2,i.y=o-i.height/2}),e.addEventListener("mousedown",t=>{if(d.value!=="PLAYING"||t.button!==0||oe)return;oe=!0;function n(){if(!oe||d.value!=="PLAYING")return;const s=Date.now();s-J>Re&&(Te(),J=s),ie=setTimeout(n,100)}n()}),e.addEventListener("mouseup",t=>{t.button===0&&he()}),e.addEventListener("contextmenu",t=>{if(t.preventDefault(),!M&&(d.value==="PLAYING"||d.value==="PAUSED")){M=!0;const n=d.value==="PLAYING"?"PAUSED":"PLAYING";d.value=n,_(n),n==="PAUSED"?(X(),he()):n==="PLAYING"&&($(),S()),setTimeout(()=>M=!1,300)}})}function he(){oe=!1,ie&&(clearTimeout(ie),ie=null)}function xt(){const e=document.getElementById("gameCanvas"),t=document.getElementById("startButton"),n=document.getElementById("restartButton"),s=document.getElementById("continueButton"),o=document.getElementById("quitButton"),r=document.getElementById("starfieldCanvas");!N&&r&&ot(r),me(e),pe(e),kt(e),Ft(e),window.addEventListener("resize",()=>{me(e),pe(e)});let l=!1;t.addEventListener("touchstart",c=>{c.preventDefault(),!(d.value!=="START"||l)&&(l=!0,v(()=>Promise.resolve().then(()=>L),void 0).then(u=>u.unlockAudio()),q(e),S(),setTimeout(()=>l=!1,1e3))},{passive:!1}),t.addEventListener("click",()=>{d.value!=="START"||l||(l=!0,v(()=>Promise.resolve().then(()=>L),void 0).then(c=>c.unlockAudio()),q(e),S(),setTimeout(()=>l=!1,1e3))}),n.addEventListener("touchstart",c=>{c.preventDefault(),q(e),S()},{passive:!1}),n.addEventListener("click",()=>{q(e),S()}),s.addEventListener("touchstart",c=>{c.preventDefault(),Ee(),S()},{passive:!1}),s.addEventListener("click",()=>{Ee(),S()}),o&&(o.addEventListener("touchstart",c=>{c.preventDefault(),ve()},{passive:!1}),o.addEventListener("click",()=>ve())),_("START")}window.addEventListener("DOMContentLoaded",xt);
