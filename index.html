<!doctype html>
<html lang="en" class="bg-black text-white">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <!-- CSP: Relaxed in development for HMR, strict in production -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data: blob:; media-src 'self'; font-src 'self'; connect-src 'self'; object-src 'none'; base-uri 'self'; form-action 'none';"
    />
    <meta
      name="description"
      content="An arcade-style space shooter game. Dodge and shoot incoming asteroids!"
    />
    <meta name="theme-color" content="#000000" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Spaceship Dodge" />
    <title>Spaceship Dodge</title>
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="icon" type="image/svg+xml" href="/space_ship_fighter.svg" />
    <link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png" />
    <link rel="stylesheet" href="styles/main-tailwind.css" />
    <link rel="stylesheet" href="styles/inline.css" />
  </head>
  <body>
    <canvas id="starfieldCanvas"></canvas>
    <canvas id="gameCanvas" tabindex="0"></canvas>

    <div
      id="liveRegionStatus"
      class="sr-only"
      role="status"
      aria-live="polite"
      aria-atomic="true"
    ></div>
    <div
      id="liveRegionScore"
      class="sr-only"
      role="status"
      aria-live="polite"
      aria-atomic="true"
    ></div>

    <div
      id="startOverlay"
      class="game-overlay visible"
      role="dialog"
      aria-modal="true"
      aria-labelledby="startOverlayTitle"
      aria-describedby="startHint"
      tabindex="-1"
    >
      <h1 id="startOverlayTitle" class="text-4xl font-bold mb-4">Spaceship Dodge</h1>
      <p class="mb-2">Dodge and Shoot the incoming asteroids</p>
      <p id="desktopControlHint" class="mb-2">Use mouse to move</p>
      <p id="mobileControlHint" class="mb-2 hidden">Use touch to move your spaceship</p>
      <p id="startHint" class="mb-4 text-lg">Tap Screen to Begin</p>
      <p id="livesInfoStart" class="mb-4 text-lg">Lives: 3</p>
      <div class="flex gap-4">
        <button id="startButton" class="game-button">Start Game</button>
        <button id="settingsButtonStart" class="game-button">Settings</button>
      </div>
      <p id="versionInfo" class="mt-4 text-xs text-gray-400"></p>
    </div>

    <div
      id="levelTransitionOverlay"
      class="game-overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="levelOverlayTitle"
      aria-describedby="currentLevelInfo currentScoreInfo"
      tabindex="-1"
    >
      <h1 id="levelOverlayTitle" class="text-4xl font-bold mb-4">LEVEL UP!</h1>
      <p id="currentLevelInfo" class="mb-2">Level 1</p>
      <p id="currentScoreInfo" class="mb-4">Score: 0</p>
      <p id="livesInfoLevel" class="mb-4 text-lg"></p>
      <p id="tapToContinueMobile" class="text-lg mt-4 hidden">Tap Anywhere to Continue</p>
      <div class="flex gap-4">
        <button id="continueButton" class="game-button">Continue</button>
        <button id="settingsButtonLevel" class="game-button">Settings</button>
      </div>
    </div>

    <div
      id="pauseOverlay"
      class="game-overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="pauseOverlayTitle"
      tabindex="-1"
    >
      <h1 id="pauseOverlayTitle" class="text-4xl font-bold mb-4">PAUSED</h1>
      <p id="livesInfoPause" class="mb-4 text-lg"></p>
      <div class="flex gap-4">
        <button
          id="quitButton"
          class="game-button"
          aria-label="Quit current game and return to main menu"
          title="Quit Game"
        >
          Quit Game
        </button>
        <button id="settingsButtonPause" class="game-button">Settings</button>
      </div>
      <p id="pauseResumeMessage">Tap background to resume</p>
    </div>

    <div
      id="gameOverOverlay"
      class="game-overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="gameOverOverlayTitle"
      aria-describedby="finalScore"
      tabindex="-1"
    >
      <h1 id="gameOverOverlayTitle" class="text-4xl font-bold mb-4">GAME OVER</h1>
      <p id="finalScore" class="mb-4">Final Score: 0</p>
      <div class="flex gap-4">
        <button id="restartButton" class="game-button">Play Again</button>
        <button id="settingsButtonGameOver" class="game-button">Settings</button>
      </div>
    </div>

    <div
      id="deathOverlay"
      class="game-overlay"
      role="dialog"
      aria-modal="true"
      aria-labelledby="deathOverlayTitle"
      aria-describedby="deathInfo"
      tabindex="-1"
    >
      <h1 id="deathOverlayTitle" class="text-4xl font-bold mb-4">DEATH</h1>
      <p id="deathInfo" class="mb-4">You died! But you still have lives remaining.</p>
      <p id="livesInfoDeath" class="mb-4 text-lg"></p>
      <div class="flex gap-4">
        <button id="continueButtonDeath" class="game-button">Continue</button>
        <button id="quitButtonDeath" class="game-button">Quit Game</button>
        <button id="settingsButtonDeath" class="game-button">Settings</button>
      </div>
    </div>

    <div
      id="fatalErrorOverlay"
      class="game-overlay"
      role="alertdialog"
      aria-modal="true"
      aria-labelledby="fatalErrorTitle"
      aria-describedby="fatalErrorMessage fatalErrorCode"
      tabindex="-1"
    >
      <h1 id="fatalErrorTitle" class="text-4xl font-bold mb-4 text-red-500">Fatal Error</h1>
      <p id="fatalErrorMessage" class="mb-4 text-center max-w-md">An unexpected error occurred</p>
      <p id="fatalErrorCode" class="mb-4 text-sm text-gray-400">Error Code: UNKNOWN</p>
      <button id="reloadButton" class="game-button">Reload Game</button>
    </div>

    <script type="module" src="/src/core/main.ts"></script>
  </body>
</html>
